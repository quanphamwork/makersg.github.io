<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ESP32 Firmware Installer (WebSerial)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">

    <header>
      <h1>ESP32 Firmware Installer</h1>
      <p class="muted">Chọn Firmware → Hardware → Screen → Kết nối → Nạp</p>
    </header>

    <main>

      <!-- THREE CAROUSELS -->
      <section class="carousels">

        <!-- Firmware carousel -->
        <div class="block">
          <h2>1) Firmware</h2>
          <div class="carousel-container" id="fw-carousel">
            <button class="nav prev">❮</button>
            <div class="carousel">
              <div class="item active" data-bin-url="">
                <div class="imgwrap"><img src="https://picsum.photos/id/1025/400/240" alt=""></div>
                <div class="meta"><div class="title">Chatbot AI</div><div class="sub">recommended</div></div>
              </div>

              <div class="item" data-bin-url="">
                <div class="imgwrap"><img src="https://picsum.photos/id/1035/400/240" alt=""></div>
                <div class="meta"><div class="title">Office Box</div><div class="sub">office_v1.bin</div></div>
              </div>

              <div class="item" data-bin-url="">
                <div class="imgwrap"><img src="https://picsum.photos/id/1043/400/240" alt=""></div>
                <div class="meta"><div class="title">Gym Box</div><div class="sub">gym_v1.bin</div></div>
              </div>
            </div>
            <button class="nav next">❯</button>
          </div>

          <div class="choose-row">
            <label class="file-label">Or choose .bin file:
              <input id="fw-file" type="file" accept=".bin" />
            </label>
            <input id="bin-url" type="text" placeholder="Or paste firmware URL (optional)" />
            <button id="btn-load-url">Load URL</button>
          </div>
        </div>

        <!-- Hardware carousel -->
        <div class="block">
          <h2>2) Hardware</h2>
          <div class="carousel-container" id="hw-carousel">
            <button class="nav prev">❮</button>
            <div class="carousel">
              <div class="item active" data-board="ESP32-S3-M16R8">
                <div class="imgwrap"><img src="https://picsum.photos/id/1060/400/240" alt=""></div>
                <div class="meta"><div class="title">ESP32-S3 M16R8</div><div class="sub">16MB flash</div></div>
              </div>

              <div class="item" data-board="ESP32-S3-Super">
                <div class="imgwrap"><img src="https://picsum.photos/id/1003/400/240" alt=""></div>
                <div class="meta"><div class="title">ESP32-S3 Super</div><div class="sub">8MB flash</div></div>
              </div>

              <div class="item" data-board="ESP32-S3-Zero">
                <div class="imgwrap"><img src="https://picsum.photos/id/1008/400/240" alt=""></div>
                <div class="meta"><div class="title">ESP32-S3 Zero</div><div class="sub">Mini board</div></div>
              </div>
            </div>
            <button class="nav next">❯</button>
          </div>
        </div>

        <!-- Screen carousel -->
        <div class="block">
          <h2>3) Screen</h2>
          <div class="carousel-container" id="sc-carousel">
            <button class="nav prev">❮</button>
            <div class="carousel">
              <div class="item active" data-screen='OLED 0.91"'>
                <div class="imgwrap oval"><img src="https://picsum.photos/id/1056/400/240" alt=""></div>
                <div class="meta"><div class="title">OLED 0.91"</div></div>
              </div>

              <div class="item" data-screen='OLED 0.96"'>
                <div class="imgwrap oval"><img src="https://picsum.photos/id/1011/400/240" alt=""></div>
                <div class="meta"><div class="title">OLED 0.96"</div></div>
              </div>

              <div class="item" data-screen='OLED 1.3"'>
                <div class="imgwrap oval"><img src="https://picsum.photos/id/1016/400/240" alt=""></div>
                <div class="meta"><div class="title">OLED 1.3"</div></div>
              </div>
            </div>
            <button class="nav next">❯</button>
          </div>
        </div>

      </section>

      <!-- RIGHT: summary and controls -->
      <aside class="summary-panel">
        <h3>Summary</h3>
        <div class="summary-list">
          <div>Firmware: <span id="sum-fw">Chatbot AI</span></div>
          <div>Board: <span id="sum-board">ESP32-S3 M16R8</span></div>
          <div>Screen: <span id="sum-screen">OLED 0.91"</span></div>
          <div>File: <span id="sum-file">No file</span></div>
        </div>

        <div class="controls">
          <button id="btn-connect">Kết nối</button>
          <button id="btn-disconnect" disabled>Ngắt kết nối</button>
        </div>

        <div class="controls" style="margin-top:12px;">
          <button id="btn-flash" class="primary" disabled>Nạp firmware</button>
        </div>

        <div class="progress-wrap">
          <div class="progress" id="progress">
            <div class="bar" id="progress-bar" style="width:0%"></div>
          </div>
          <div id="progress-text">0%</div>
        </div>

        <div class="logs" id="logs">
          <div class="log">Logs appear here...</div>
        </div>

      </aside>

    </main>

    <footer>
      <small>Chạy trên Chrome/Edge (Chromium). Yêu cầu HTTPS hoặc localhost để dùng WebSerial API.</small>
    </footer>

  </div>

  <script src="app.js"></script>
</body>
</html>
